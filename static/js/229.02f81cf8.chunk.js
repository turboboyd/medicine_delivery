"use strict";(self.webpackChunkmedicine_delivery=self.webpackChunkmedicine_delivery||[]).push([[229],{229:(e,r,a)=>{a.r(r),a.d(r,{default:()=>h});var l=a(43),s=a(892),d=a(899),i=a(3),n=a(662),t=a(216),c=a(579);const m=e=>{let{label:r,name:a,type:l,placeholder:d}=e;return(0,c.jsxs)("label",{className:"block",children:[r,":",(0,c.jsx)(s.D0,{type:l,name:a,placeholder:d,className:"mt-1 p-2 border border-gray-300 rounded w-full"}),(0,c.jsx)(s.Kw,{name:a,component:"div",className:"text-red-500 text-sm"})]})},o=d.Ik().shape({address:d.Yj().required("Address is required"),email:d.Yj().email("Invalid email").required("Email is required"),phoneNumber:d.Yj().matches(/^[0-9]+$/,"Only digits allowed").required("Phone number is required"),name:d.Yj().required("Name is required")}),u=e=>{let{formRef:r}=e;const a=(0,i.wA)(),l=(0,i.d4)((e=>e.cart.cart)),d=(0,t.Zp)();return(0,c.jsx)("div",{className:" w-1/2 overflow-auto max-h-screen px-4 py-4 border rounded-lg",children:(0,c.jsx)(s.l1,{innerRef:r,initialValues:{address:"",email:"",phoneNumber:"",name:""},validationSchema:o,onSubmit:e=>{const r={...e,medicines:l.map((e=>{let{medicineId:r,storeId:a,quantity:l}=e;return{medicineId:r,storeId:a,quantity:l}}))};a((0,n.wH)(r)).unwrap().then((()=>{d("/success")})).catch((e=>{console.error("Order placement failed:",e)}))},children:e=>{let{isSubmitting:r}=e;return(0,c.jsxs)(s.lV,{className:"flex flex-col gap-4",children:[(0,c.jsx)(m,{label:"Name",name:"name",type:"text",placeholder:"Name"}),(0,c.jsx)(m,{label:"Email",name:"email",type:"email",placeholder:"Email"}),(0,c.jsx)(m,{label:"Phone",name:"phoneNumber",type:"text",placeholder:"Phone"}),(0,c.jsx)(m,{label:"Address",name:"address",type:"text",placeholder:"Address"})]})}})})},x=e=>{let{submitForm:r}=e;const a=(0,i.d4)((e=>e.cart.cart)).reduce(((e,r)=>e+r.quantity*r.price),0);return(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{children:[" Order summary : ",a]}),(0,c.jsx)("button",{type:"button",onClick:r,className:"w-32 bg-blue-500 text-white p-2 rounded hover:bg-blue-600 disabled:opacity-50 mt-4",children:"Submit"})]})},b=()=>{const e=(0,i.wA)(),r=(0,i.d4)((e=>e.cart.cart)),a=(0,l.useCallback)(((r,a,l)=>{e((0,n.V2)({medicineId:r,storeId:a,quantity:l+1}))}),[e]),s=(0,l.useCallback)(((r,a,l)=>{e(l>1?(0,n.V2)({medicineId:r,storeId:a,quantity:l-1}):(0,n.dt)({medicineId:r,storeId:a}))}),[e]);return(0,c.jsx)("div",{className:"  w-1/2 overflow-auto px-4 py-4 border rounded-lg",children:(0,c.jsx)("ul",{className:"flex flex-col gap-4",children:r.map(((e,r)=>(0,c.jsxs)("li",{className:"p-4 flex gap-4 border rounded-lg",children:[(0,c.jsx)("div",{className:"w-1/2 h-28 bg-gray-300",children:(0,c.jsx)("img",{src:e.image,alt:e.name,className:"h-48 w-full object-cover"})}),(0,c.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,c.jsx)("div",{className:"font-bold",children:e.name}),(0,c.jsxs)("div",{children:["Price: ",e.price,"$"]}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("button",{"aria-label":"Decrease quantity",className:"px-3 py-1 border border-red-500 rounded bg-red-500 hover:bg-red-600",onClick:()=>s(e.medicineId,e.storeId,e.quantity),children:"\u2212"}),(0,c.jsx)("input",{className:"w-12 text-center border rounded cursor-default",type:"number",value:e.quantity,readOnly:!0}),(0,c.jsx)("button",{"aria-label":"Increase quantity",className:"px-3 py-1 border border-green-500 rounded bg-green-500 hover:bg-green-600",onClick:()=>a(e.medicineId,e.storeId,e.quantity),children:"+"})]})]})]},r)))})})},h=()=>{const e=(0,l.useRef)(null);return(0,c.jsxs)("div",{className:"container mx-auto px-4 max-h-[80vh]",children:[(0,c.jsxs)("div",{className:"flex gap-8 max-h-[75vh]",children:[(0,c.jsx)(u,{formRef:e}),(0,c.jsx)(b,{})]}),(0,c.jsx)(x,{submitForm:()=>{e.current&&e.current.handleSubmit()}})]})}}}]);
//# sourceMappingURL=229.02f81cf8.chunk.js.map